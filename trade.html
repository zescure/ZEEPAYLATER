<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Simulasi Trading King Zezy</title>
  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: Arial, sans-serif; background: #f0f2f5; color: #333; }
    .container { max-width: 960px; margin: 40px auto; padding: 20px; background: #fff;
                 border-radius: 8px; box-shadow: 0 2px 12px rgba(0,0,0,0.1); }
    h1 { text-align: center; margin-bottom: 20px; }
    .balance { text-align: center; margin-bottom: 20px; font-size: 1.2em; }
    .deposit { display: flex; justify-content: center; margin-bottom: 30px; gap:8px; }
    .deposit input { width: 200px; padding: 8px; border: 1px solid #ccc; border-radius: 4px; }
    .deposit button { padding: 8px 16px; background: #ffc107; border: none; border-radius: 4px;
                      cursor: pointer; transition: background .3s; }
    .deposit button:hover { background: #e0a800; }

    .btn-group { display: flex; justify-content: center; margin-bottom: 24px; }
    .btn-group .btn {
      flex: 1; margin: 0 8px; padding: 12px 0; background: #0069d9; color: #fff;
      text-align: center; border-radius: 4px; cursor: pointer; transition: background .3s;
    }
    .btn-group .btn.active { background: #004085; }
    .btn-group .btn:hover { background: #0053a6; }

    .section { display: none; padding: 16px 0; border-top: 1px solid #e0e0e0; }
    .section.active { display: block; }

    .card { background: #fafbfc; border: 1px solid #e3e6ea; border-radius: 6px;
            padding: 20px; margin-bottom: 24px; }
    .card h3 { margin-bottom: 8px; }
    .card p { margin-bottom: 12px; line-height: 1.5; }
    .card .chart-container { position: relative; height: 150px; }
    .card .trade-group { display: flex; gap: 8px; margin-top: 12px; }
    .card .trade-group input {
      flex: 1; padding: 8px; border: 1px solid #ccc; border-radius: 4px;
    }
    .card .trade-group button {
      padding: 8px 12px; background: #28a745; color: #fff; border: none;
      border-radius: 4px; cursor: pointer; transition: background .3s;
    }
    .card .trade-group button:hover { background: #1e7e34; }
  </style>
</head>
<body>

<div class="container">
  <h1>Simulasi Trading King Zezy</h1>
  <div class="balance">Saldo kamu: <span id="balance">Rp 0</span></div>

  <div class="deposit">
    <input type="number" id="depositAmount" placeholder="Masukkan jumlah deposit (Rp)" />
    <button onclick="makeDeposit()">Deposit</button>
  </div>

  <div class="btn-group">
    <div class="btn active" data-target="spread">Call/Put Spread</div>
    <div class="btn" data-target="knockout">Knock‑Out Options</div>
    <div class="btn" data-target="stocks">Stock Options</div>
  </div>

  <!-- Call/Put Spread -->
  <div id="spread" class="section active">
    <div class="card">
      <h3>Call/Put Spread</h3>
      <p>Trading spread sederhana—risiko dan reward sudah ditentukan.</p>
      <div class="chart-container"><canvas id="chartSpread"></canvas></div>
      <div class="trade-group">
        <input type="number" id="tradeSpreadAmt" placeholder="Rp untuk spread" />
        <button onclick="executeTrade('spread')">Execute</button>
      </div>
    </div>
  </div>

  <!-- Knock‑Out Options -->
  <div id="knockout" class="section">
    <div class="card">
      <h3>Knock‑Out Options</h3>
      <p>Level KO = stop‑loss otomatis. Jika hit, rugi penuh; jika tidak, profit sesuai move.</p>
      <div class="chart-container"><canvas id="chartKO"></canvas></div>
      <div class="trade-group">
        <input type="number" id="tradeKOAmt" placeholder="Rp untuk KO" />
        <button onclick="executeTrade('knockout')">Execute</button>
      </div>
    </div>
  </div>

  <!-- Stock Options -->
  <div id="stocks" class="section">
    <div class="card">
      <h3>Stock Options</h3>
      <p>Hak beli/jual saham—profit/loss mengikuti % pergerakan pasar.</p>
      <div class="chart-container"><canvas id="chartStocks"></canvas></div>
      <div class="trade-group">
        <input type="number" id="tradeStocksAmt" placeholder="Rp untuk opsi saham" />
        <button onclick="executeTrade('stocks')">Execute</button>
      </div>
    </div>
  </div>
</div>

<script>
  // State
  let balance = 0;

  // Utility
  function fmtRupiah(x){
    return 'Rp ' + x.toLocaleString('id-ID');
  }

  function updateBalance() {
    document.getElementById('balance').textContent = fmtRupiah(balance);
  }

  // Deposit
  function makeDeposit(){
    const amt = parseInt(document.getElementById('depositAmount').value);
    if(!amt || amt <=0) return alert('Masukkan jumlah deposit valid!');
    balance += amt;
    updateBalance();
    document.getElementById('depositAmount').value = '';
    alert('Deposit berhasil: ' + fmtRupiah(amt));
  }

  // Section toggle
  document.querySelectorAll('.btn').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      document.querySelectorAll('.btn').forEach(b=>b.classList.remove('active'));
      document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
      btn.classList.add('active');
      document.getElementById(btn.dataset.target).classList.add('active');
    });
  });

  // Random-walk chart update
  function createChart(ctx, start, label){
    const data = [start];
    const chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: [new Date().toLocaleTimeString()],
        datasets: [{ data, label, fill:false, tension:0.3, borderWidth:2 }]
      },
      options: {
        animation: false,
        responsive: true,
        scales: { x:{display:true}, y:{display:true} },
        plugins: { legend:{display:false} }
      }
    });
    // update every second
    setInterval(()=>{
      const last = data[data.length-1];
      const change = (Math.random()*2 -1) * (last * 0.001); // ±0.1%
      const next = Math.max(last + change, last*0.9);
      data.push(next);
      chart.data.labels.push(new Date().toLocaleTimeString());
      if(data.length>30){
        data.shift(); chart.data.labels.shift();
      }
      chart.update('none');
    }, 1000);
    return chart;
  }

  // Init charts
  window.onload = ()=>{
    createChart(document.getElementById('chartSpread').getContext('2d'), 100, 'Spread');
    createChart(document.getElementById('chartKO').getContext('2d'), 1.0700, 'KO Level');
    createChart(document.getElementById('chartStocks').getContext('2d'), 50, 'Stock Price');
  };

  // Execute simulated trade
  function executeTrade(type){
    let amtInput, outcome, profit;
    if(type==='spread'){
      amtInput = parseInt(document.getElementById('tradeSpreadAmt').value);
      if(!amtInput||amtInput<1||amtInput>balance) return alert('Nominal trade invalid atau > saldo!');
      // spread: win 80% atau lose 20%
      outcome = Math.random()<0.5 ? 'win' : 'lose';
      profit = outcome==='win' ? Math.floor(amtInput * 0.8) : -amtInput;
      balance += profit;
      document.getElementById('tradeSpreadAmt').value='';
    }
    else if(type==='knockout'){
      amtInput = parseInt(document.getElementById('tradeKOAmt').value);
      if(!amtInput||amtInput<1||amtInput>balance) return alert('Nominal trade invalid atau > saldo!');
      // KO: 50% chance KO hit (lose full), else gain 50%
      outcome = Math.random()<0.5 ? 'KO hit' : 'profit';
      profit = outcome==='profit' ? Math.floor(amtInput * 0.5) : -amtInput;
      balance += profit;
      document.getElementById('tradeKOAmt').value='';
    }
    else if(type==='stocks'){
      amtInput = parseInt(document.getElementById('tradeStocksAmt').value);
      if(!amtInput||amtInput<1||amtInput>balance) return alert('Nominal trade invalid atau > saldo!');
      // stock opt: profit/loss random ±10%
      const pct = (Math.random()*2 -1) * 0.10;
      profit = Math.floor(amtInput * pct);
      outcome = profit>=0 ? 'gain' : 'loss';
      balance += profit;
      document.getElementById('tradeStocksAmt').value='';
    }
    updateBalance();
    alert(`Trade ${type} outcome: ${outcome.toUpperCase()} ${fmtRupiah(profit)}\nSaldo sekarang: ${fmtRupiah(balance)}`);
  }
</script>

</body>
</html>
